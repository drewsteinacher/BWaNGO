@namespace BWaNGO.Components

@using BWaNGO.Models

<MudGrid Justify="Justify.SpaceBetween" Spacing="3">
    @foreach(var index in Enumerable.Range(0, Board.Rows * Board.Columns))
    {
        var square = Board.GetSquare(index % Board.Rows, index / Board.Rows);

        <BingoBoardSquareComponent @bind-Board="Board"
                                   @bind-Board:after="AfterBoardChanged"
                                   @bind-Square="square"
                                   Index="index"/>

        @if((index + 1) % Board.Rows == 0)
        {
            <MudFlexBreak/>
        }
    }
</MudGrid>

@code {
    [Parameter]
    public required BingoBoard Board { get; set; }
    
    [Parameter]
    public EventCallback<BingoBoard> BoardChanged { get; set; }

    [Parameter]
    public bool IsEditMode { get; set; }

    private Task AfterBoardChanged()
    {
        Console.WriteLine("Board changed in BingoBoardComponent.");
        return BoardChanged.InvokeAsync(Board);
    }

}